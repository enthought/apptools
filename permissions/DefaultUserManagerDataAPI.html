<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>Default User Manager Data API &mdash; Apptools Documentation</title>
    
    <link rel="stylesheet" type="text/css" href="../_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../_static/css/spc-extend.css">
    <link rel="stylesheet" href="../_static/enthought.css" type="text/css" >
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" >
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.6.0.dev77',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/js/copybutton.js"></script>
    <script type="text/javascript" src="../_static/js/wrap_on_dot.js"></script>
    <link rel="shortcut icon" href="../_static/img/favicon.ico">
    <link rel="index" title="Index" href="../genindex.html" >
    <link rel="search" title="Search" href="../search.html" >
    <link rel="top" title="Apptools Documentation" href="../index.html" >
    <link rel="next" title="Preferences" href="../preferences/Preferences.html" >
    <link rel="prev" title="Default Policy Manager Data API" href="DefaultPolicyManagerDataAPI.html" > 
  </head>
  <body>
  <div class="container">
    <div class="header">
    </div>
  </div>

    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
	
        <li class="active"><a href="../index.html">Apptools Documentation</a></li>
	 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="../genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
      <li class="active">
        <a href="../py-modindex.html" title="Python Module Index"
           >modules</a>
      </li>
      <li class="active">
        <a href="../preferences/Preferences.html" title="Preferences"
           accesskey="N">next</a>
      </li>
      <li class="active">
        <a href="DefaultPolicyManagerDataAPI.html" title="Default Policy Manager Data API"
           accesskey="P">previous</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body">
            
  <div class="section" id="default-user-manager-data-api">
<h1>Default User Manager Data API<a class="headerlink" href="#default-user-manager-data-api" title="Permalink to this headline">¶</a></h1>
<p>This section provides an overview of the part of the ETS Permissions Framework
API used by developers who want to store a user database in a more secure
location (eg. a remote server) than that provided by the default
implementation.</p>
<p>The API is defined by the default user manager which uses password based
authorisation.  If this API isn’t sufficiently flexible, or if another method
of authorisation is used (biometrics for example) then an alternative user
manager should be implemented.</p>
<p>The API is fully defined by the <a class="reference external" href="https://svn.enthought.com/enthought/browser/AppTools/trunk/enthought/permissions/default/i_user_database.py">IUserDatabase interface</a>.  This allows user
databases to be implemented that extend the <a class="reference external" href="https://svn.enthought.com/enthought/browser/AppTools/trunk/enthought/permissions/i_user.py">IUser interface</a> and store
additional user related data.  If the user database is being persisted in
secure storage (eg. a remote RDBMS) then this could be used to store sensitive
data (eg. passwords for external systems) that shouldn’t be stored as ordinary
preferences.</p>
<p>In most cases there will be no requirement to store additional user related
data than that defined by <code class="docutils literal notranslate"><span class="pre">IUser</span></code> so the supplied <a class="reference external" href="https://svn.enthought.com/enthought/browser/AppTools/trunk/enthought/permissions/default/user_database.py">UserDatabase
implementation</a> (which provides all the GUI code required to implement the
<a class="reference external" href="https://svn.enthought.com/enthought/browser/AppTools/trunk/enthought/permissions/default/i_user_database.py">IUserDatabase interface</a>) can be used.  The <a class="reference external" href="https://svn.enthought.com/enthought/browser/AppTools/trunk/enthought/permissions/default/user_database.py">UserDatabase implementation</a>
delegates the access to the user database to an object implementing the
<a class="reference external" href="https://svn.enthought.com/enthought/browser/AppTools/trunk/enthought/permissions/default/i_user_storage.py">IUserStorage interface</a>.  The default implementation of this interface
stores the user database as a pickle in a local file.</p>
<div class="section" id="overview-of-iuserstorage">
<h2>Overview of IUserStorage<a class="headerlink" href="#overview-of-iuserstorage" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://svn.enthought.com/enthought/browser/AppTools/trunk/enthought/permissions/default/i_user_storage.py">IUserStorage interface</a> defines a number of methods that must be
implemented to read and write to the user database.  The methods are designed
to be implemented using simple SQL statements.</p>
<p>In the event of an error a method must raise the <code class="docutils literal notranslate"><span class="pre">UserStorageError</span></code>
exception.  The string representation of the exception is used as an error
message that is displayed to the user.</p>
</div>
<div class="section" id="overview-of-iuserdatabase">
<h2>Overview of IUserDatabase<a class="headerlink" href="#overview-of-iuserdatabase" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://svn.enthought.com/enthought/browser/AppTools/trunk/enthought/permissions/default/i_user_database.py">IUserDatabase interface</a> defines a set of <code class="docutils literal notranslate"><span class="pre">Bool</span></code> traits, all beginning
with <code class="docutils literal notranslate"><span class="pre">can_</span></code>, that describe the capabilities of a particular implementation.
For example, the <code class="docutils literal notranslate"><span class="pre">can_add_user</span></code> trait is set by an implementation if it
supports the ability to add a new user to the database.</p>
<p>Each of these capability traits has a corresponding method which has the same
name except for the <code class="docutils literal notranslate"><span class="pre">can_</span></code> prefix.  The method only needs to be implemented
if the corresponding traits is <code class="docutils literal notranslate"><span class="pre">True</span></code>.  The method, for example
<code class="docutils literal notranslate"><span class="pre">add_user()</span></code> is called by the user manager to implement the capability.</p>
<p>The interface has two other methods.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">bootstrapping()</span></code> method is called by the user manager to determine if
the database is bootstrapping.  Typically this is when the database is empty
and no users have yet been defined.  The permissions framework treats this
situation as a special case and is able to relax the enforcement of permissions
to allow users and permissions to be initially defined.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">user_factory()</span></code> method is called by the user manager to create a new
user object, ie. an object that implements the <a class="reference external" href="https://svn.enthought.com/enthought/browser/AppTools/trunk/enthought/permissions/i_user.py">IUser interface</a>.  This allows
an implementation to extend the <a class="reference external" href="https://svn.enthought.com/enthought/browser/AppTools/trunk/enthought/permissions/i_user.py">IUser interface</a> and store additional user
related data in the object if the <code class="docutils literal notranslate"><span class="pre">blob</span></code> trait proves insufficient.</p>
</div>
</div>


          </div>
        </div>
          </div>
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/img/e-logo.png" alt="Logo">
            </a></p>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Default User Manager Data API</a><ul>
<li><a class="reference internal" href="#overview-of-iuserstorage">Overview of IUserStorage</a></li>
<li><a class="reference internal" href="#overview-of-iuserdatabase">Overview of IUserDatabase</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="DefaultPolicyManagerDataAPI.html"
                        title="previous chapter">Default Policy Manager Data API</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../preferences/Preferences.html"
                        title="next chapter">Preferences</a></p>
  <h3>This Page</h3>
  <div>
    <a href="../_sources/permissions/DefaultUserManagerDataAPI.rst.txt"
       rel="nofollow">Show Source</a>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2008-2020, Enthought
      </li>
      <li>
      Last updated on Jun 12, 2020.
      </li>
      <li>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.8.5.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>