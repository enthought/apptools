<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>apptools.persistence.versioned_unpickler module &mdash; Apptools Documentation</title>
    
    <link rel="stylesheet" type="text/css" href="../_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../_static/css/spc-extend.css">
    <link rel="stylesheet" href="../_static/enthought.css" type="text/css" >
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" >
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" >
    <link rel="stylesheet" href="../_static/enthought.css" type="text/css" >
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        LINK_SUFFIX: '.html',
        SOURCELINK_SUFFIX: '.txt',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/copybutton.js"></script>
    <script type="text/javascript" src="../_static/js/wrap_on_dot.js"></script>
    <link rel="shortcut icon" href="../_static/img/favicon.png">
    <link rel="index" title="Index" href="../genindex.html" >
    <link rel="search" title="Search" href="../search.html" >
    <link rel="top" title="Apptools Documentation" href="../index.html" >
    <link rel="up" title="apptools.persistence package" href="apptools.persistence.html" >
    <link rel="next" title="apptools.preferences package" href="apptools.preferences.html" >
    <link rel="prev" title="apptools.persistence.version_registry module" href="apptools.persistence.version_registry.html" > 
  </head>
  <body>
  <div class="container">
    <div class="header">
    </div>
  </div>

    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
	
        <li class="active"><a href="../index.html">Apptools Documentation</a></li>
	
          <li class="active"><a href="apptools.html" >apptools package</a></li>
          <li class="active"><a href="apptools.persistence.html" accesskey="U">apptools.persistence package</a></li> 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="../genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
      <li class="active">
        <a href="../py-modindex.html" title="Python Module Index"
           >modules</a>
      </li>
      <li class="active">
        <a href="apptools.preferences.html" title="apptools.preferences package"
           accesskey="N">next</a>
      </li>
      <li class="active">
        <a href="apptools.persistence.version_registry.html" title="apptools.persistence.version_registry module"
           accesskey="P">previous</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body" role="main">
            
  <section id="module-apptools.persistence.versioned_unpickler">
<span id="apptools-persistence-versioned-unpickler-module"></span><h1>apptools.persistence.versioned_unpickler module<a class="headerlink" href="#module-apptools.persistence.versioned_unpickler" title="Permalink to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="apptools.persistence.versioned_unpickler.NewUnpickler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apptools.persistence.versioned_unpickler.</span></span><span class="sig-name descname"><span class="pre">NewUnpickler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fix_imports</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ASCII'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'strict'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apptools/persistence/versioned_unpickler.html#NewUnpickler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apptools.persistence.versioned_unpickler.NewUnpickler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_Unpickler</span></code></p>
<p>An unpickler that implements a two-stage pickling process to make it
possible to unpickle complicated Python object hierarchies where the
unserialized state of an object depends on the state of other objects in
the same pickle.</p>
<dl class="py method">
<dt class="sig sig-object py" id="apptools.persistence.versioned_unpickler.NewUnpickler.initialize">
<span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_pass</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apptools/persistence/versioned_unpickler.html#NewUnpickler.initialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apptools.persistence.versioned_unpickler.NewUnpickler.initialize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apptools.persistence.versioned_unpickler.NewUnpickler.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_pass</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apptools/persistence/versioned_unpickler.html#NewUnpickler.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apptools.persistence.versioned_unpickler.NewUnpickler.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a pickled object representation from the open file.</p>
<p>Return the reconstituted object hierarchy specified in the file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apptools.persistence.versioned_unpickler.NewUnpickler.load_build">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load_build</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apptools/persistence/versioned_unpickler.html#NewUnpickler.load_build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apptools.persistence.versioned_unpickler.NewUnpickler.load_build" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="apptools.persistence.versioned_unpickler.VersionedUnpickler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">apptools.persistence.versioned_unpickler.</span></span><span class="sig-name descname"><span class="pre">VersionedUnpickler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">updater</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apptools/persistence/versioned_unpickler.html#VersionedUnpickler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apptools.persistence.versioned_unpickler.VersionedUnpickler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#apptools.persistence.versioned_unpickler.NewUnpickler" title="apptools.persistence.versioned_unpickler.NewUnpickler"><code class="xref py py-class docutils literal notranslate"><span class="pre">NewUnpickler</span></code></a></p>
<p>This class reads in a pickled file created at revision version ‘n’
and then applies the transforms specified in the updater class to
generate a new set of objects which are at revision version ‘n+1’.</p>
<p>I decided to keep the loading of the updater out of this generic class
because we will want updaters to be generated for each plugin’s type
of project.</p>
<p>This ensures that the VersionedUnpickler can remain ignorant about the
actual version numbers - all it needs to do is upgrade one release.</p>
<dl class="py method">
<dt class="sig sig-object py" id="apptools.persistence.versioned_unpickler.VersionedUnpickler.add_updater">
<span class="sig-name descname"><span class="pre">add_updater</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">klass</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apptools/persistence/versioned_unpickler.html#VersionedUnpickler.add_updater"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apptools.persistence.versioned_unpickler.VersionedUnpickler.add_updater" title="Permalink to this definition">¶</a></dt>
<dd><p>If there is an updater defined for this class we will add it to the
class as the __setstate__ method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apptools.persistence.versioned_unpickler.VersionedUnpickler.backup_setstate">
<span class="sig-name descname"><span class="pre">backup_setstate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">klass</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apptools/persistence/versioned_unpickler.html#VersionedUnpickler.backup_setstate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apptools.persistence.versioned_unpickler.VersionedUnpickler.backup_setstate" title="Permalink to this definition">¶</a></dt>
<dd><p>If the class has a user defined __setstate__ we back it up.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apptools.persistence.versioned_unpickler.VersionedUnpickler.find_class">
<span class="sig-name descname"><span class="pre">find_class</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apptools/persistence/versioned_unpickler.html#VersionedUnpickler.find_class"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apptools.persistence.versioned_unpickler.VersionedUnpickler.find_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden method from Unpickler.</p>
<p>NB  __setstate__ is not called until later.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="apptools.persistence.versioned_unpickler.VersionedUnpickler.import_name">
<span class="sig-name descname"><span class="pre">import_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/apptools/persistence/versioned_unpickler.html#VersionedUnpickler.import_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#apptools.persistence.versioned_unpickler.VersionedUnpickler.import_name" title="Permalink to this definition">¶</a></dt>
<dd><p>If the class is needed for the latest version of the application then
it should presumably exist.</p>
<p>If the class no longer exists then we should perhaps return
a proxy of the class.</p>
<p>If the persisted file is at v1 say and the application is at v3 then
objects that are required for v1 and v2 do not have to exist they only
need to be placeholders for the state during an upgrade.</p>
</dd></dl>

</dd></dl>

</section>


          </div>
        </div>
          </div>
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/img/e-logo.png" alt="Logo">
            </a></p>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="apptools.persistence.version_registry.html"
                          title="previous chapter">apptools.persistence.version_registry module</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="apptools.preferences.html"
                          title="next chapter">apptools.preferences package</a></p>
  </div>
  <h3>This Page</h3>
  <div>
    <a href="../_sources/api/apptools.persistence.versioned_unpickler.rst.txt"
       rel="nofollow">Show Source</a>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2008-2024, Enthought
      </li>
      <li>
      Last updated on Jul 05, 2024.
      </li>
      <li>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 5.1.1.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>